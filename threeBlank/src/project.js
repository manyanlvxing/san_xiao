require=function n(e,t,a){function o(l,r){if(!t[l]){if(!e[l]){var c="function"==typeof require&&require;if(!r&&c)return c(l,!0);if(i)return i(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var h=t[l]={exports:{}};e[l][0].call(h.exports,function(n){var t=e[l][1][n];return o(t?t:n)},h,h.exports,n,e,t,a)}return t[l].exports}for(var i="function"==typeof require&&require,l=0;l<a.length;l++)o(a[l]);return o}({NewScript:[function(n,e,t){"use strict";cc._RFpush(e,"f5f4d+69stA7LN0lFAovI6t","NewScript"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){cc.director.preloadScene("New Scene"),cc.log("Scene ok")},change:function(){cc.director.loadScene("New Scene")}}),cc._RFpop()},{}],blank:[function(n,e,t){"use strict";cc._RFpush(e,"0bdaarwLZZP15CHVwr6ExzE","blank"),cc.Class({"extends":cc.Component,properties:{_cliclStartEvent:null,_spriteFrameArr:[],_selfI:0,_selfJ:0,_type:0,_fallDownNum:0,_moveLeftNum:0},onLoad:function(){var n=this;this._cliclStartEvent=this.node.on(cc.Node.EventType.TOUCH_START,function(){var e=cc.find("script");e.emit(GameConfig.event.clickBlank,n.node)})},init:function(n,e,t){this._spriteFrameArr=n,this._type=~~(Math.random()*GameConfig.blank_type),this.getComponent(cc.Sprite).spriteFrame=this._spriteFrameArr[this._type],this._selfI=e,this._selfJ=t},showInfo:function(){return{i:this._selfI,j:this._selfJ,type:this._type}},blankIfClick:function(n,e){n?(this.node.scale=.9,this.node.opacity=210):(this.node.scale=1,this.node.opacity=250)},moveCartoon:function(n){this.node.runAction(cc.moveTo(.4,cc.p(n)))},changeLabel:function(n,e,t){this._selfI=n,this._selfJ=e,this._type=t},setFallDownNum:function(n){this._fallDownNum=n},startFallDown:function(){return this._selfJ-=this._fallDownNum,this.node.runAction(cc.moveBy(.45,cc.p(0,-this._fallDownNum*GameConfig.blank_width))),this._fallDownNum},randomColor:function(){this._type=~~(Math.random()*GameConfig.blank_type),this.getComponent(cc.Sprite).spriteFrame=this._spriteFrameArr[this._type]},clickClose:function(n){n?this.node.off(cc.Node.EventType.TOUCH_START,this._cliclStartEvent):this.node.on(cc.Node.EventType.TOUCH_START,this._cliclStartEvent)},changeColor:function(n){this._type=n}}),cc._RFpop()},{}],game:[function(n,e,t){"use strict";cc._RFpush(e,"322a2xhVW5LGqZLNQbXkxUf","game"),window.GameConfig={blank_w:10,blank_h:10,blank_type:7,startPx:-200,startPy:-200,blank_width:40,event:{clickBlank:"click_Blank"},_checkSameArr:[]},cc.Class({"extends":cc.Component,properties:{countNum:90,_score:0,_count:0,_clickTrade:null,blankCo:[cc.SpriteFrame],_blankArr:[],blank_prefab:cc.Prefab,_search:!0},onLoad:function(){cc.director.preloadScene("start"),cc.director.preloadScene("New Scene");var n=cc.find("Canvas/IMG_22");n.active=!1;var e=cc.find("Canvas/IMG_22/false");e.active=!1;var t=cc.find("Canvas/IMG_22/succes");t.active=!1,this._blankArr=[];for(var a=0;a<GameConfig.blank_w;a++){for(var o=[],i=0;i<GameConfig.blank_h;i++)o.push(null);this._blankArr.push(o)}this.buildRandom(),this.getDifBlank(),this.time();var l=this;this.node.on(GameConfig.event.clickBlank,function(n){var e=n.getUserData();l.exchangeClick(e),cc.log("data",e.getComponent("blank").showInfo().type)})},buildRandom:function(){for(var n=cc.find("Canvas/blanks"),e=0;e<GameConfig.blank_w;e++)for(var t=0;t<GameConfig.blank_h;t++){var a=cc.instantiate(this.blank_prefab);a.x=GameConfig.blank_width*e+GameConfig.startPx,a.y=GameConfig.blank_width*t+GameConfig.startPy,n.addChild(a),a.getComponent("blank").init(this.blankCo,e,t),this._blankArr[e][t]=a}},getDifBlank:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++)e<GameConfig.blank_h-2&&this._blankArr[n][e].getComponent("blank").showInfo().type==this._blankArr[n][e+1].getComponent("blank").showInfo().type&&this._blankArr[n][e+1].getComponent("blank").showInfo().type==this._blankArr[n][e+2].getComponent("blank").showInfo().type&&(this._blankArr[n][e].getComponent("blank").randomColor(),this.getDifBlank()),n<GameConfig.blank_w-2&&this._blankArr[n][e].getComponent("blank").showInfo().type==this._blankArr[n+1][e].getComponent("blank").showInfo().type&&this._blankArr[n+1][e].getComponent("blank").showInfo().type==this._blankArr[n+2][e].getComponent("blank").showInfo().type&&(this._blankArr[n][e].getComponent("blank").randomColor(),this.getDifBlank())},exchangeClick:function(n){if(null==this._clickTrade)n.getComponent("blank").blankIfClick(!0,7),this._clickTrade=n;else{for(var e=[cc.p(0,-1),cc.p(0,1),cc.p(1,0),cc.p(-1,0)],t=n.getComponent("blank").showInfo(),a=cc.p(t.i,t.j),o=0;o<e.length;o++){var i=e[o],l=cc.pAdd(i,a);if(l.x==this._clickTrade.getComponent("blank").showInfo().i&&l.y==this._clickTrade.getComponent("blank").showInfo().j)return this._clickTrade.getComponent("blank").blankIfClick(!1,this._clickTrade.getComponent("blank").showInfo().type),this.exchangeCloseClick(),this.exchangeLocation(this._clickTrade,n,!0),this.kaiguan(!1),void(this._clickTrade=null)}this._clickTrade==n?(this._clickTrade.getComponent("blank").blankIfClick(!1,this._clickTrade.getComponent("blank").showInfo().type),this._clickTrade=null):(this._clickTrade.getComponent("blank").blankIfClick(!1,this._clickTrade.getComponent("blank").showInfo().type),n.getComponent("blank").blankIfClick(!0,7),this._clickTrade=n)}},exchangeLocation:function(n,e,t){var a=e;e.getComponent("blank").moveCartoon(n.getPosition()),n.getComponent("blank").moveCartoon(a.getPosition());var o=n.getComponent("blank").showInfo(),i=e.getComponent("blank").showInfo();this._blankArr[i.i][i.j]=n,this._blankArr[i.i][i.j].getComponent("blank").changeLabel(i.i,i.j,o.type),this._blankArr[o.i][o.j]=a,this._blankArr[o.i][o.j].getComponent("blank").changeLabel(o.i,o.j,i.type),1==t&&(this._count=0,this.checkSame(this._blankArr[i.i][i.j],this._blankArr[o.i][o.j]))},filterDelSame:function(n,e){for(var t=n.concat(e),a=0;a<t.length;a++)for(var o=t[a],i=a+1;i<t.length;i++)cc.pSameAs(t[i],o)&&(t.splice(i,1),i--);0==t.length?(this.scheduleOnce(function(){this.exchangeOpenClick()},.7),this.scheduleOnce(function(){this.kaiguan(!0)},.7)):this.scheduleOnce(function(){this.deleteBlank(t)},.55)},deleteBlank:function(n){var e=n,t=n.length;this._score+=t;var a=this;if(this.node.getChildByName("label").getComponent(cc.Label).string="score:"+this._score,this._score>=100&&this.countNum>=0){a.exchangeCloseClick(),this.kaiguan(!0);var o=cc.find("Canvas/IMG_22");o.active=!0,o.getChildByName("succes").active=!0,this.node.getChildByName("label").active=!1,this.node.getChildByName("time label").active=!1,this.node.getChildByName("score label").active=!1,a.scheduleOnce(function(){a.replay()},4)}for(var i=0;i<e.length;i++){var o=e[i];o.removeFromParent(!0);var l=o.getComponent("blank").showInfo();this._blankArr[l.i][l.j]=null}for(var i=0;i<GameConfig.blank_w;i++)for(var r=0;r<GameConfig.blank_h;r++){var c=this._blankArr[i][r];if(c){if(this._fallDownNum=0,r>0)for(var s=r-1;s>=0;s--)null==this._blankArr[i][s]&&this._fallDownNum++;c.getComponent("blank").setFallDownNum(this._fallDownNum)}}for(var i=0;i<GameConfig.blank_w;i++)for(var r=0;r<GameConfig.blank_h;r++){var h=this._blankArr[i][r];if(h){var k=h.getComponent("blank").startFallDown(),t=this._blankArr[i][r];this._blankArr[i][r]=this._blankArr[i][r-k],this._blankArr[i][r-k]=t}}this.scheduleOnce(function(){this.fillBlank()},.55)},fillBlank:function(){for(var n=cc.find("Canvas/blanks"),e=0;e<GameConfig.blank_w;e++)for(var t=0;t<GameConfig.blank_h;t++)if(null==this._blankArr[e][t]){var a=cc.instantiate(this.blank_prefab);a.x=GameConfig.blank_width*e+GameConfig.startPx,a.y=GameConfig.blank_width*t+GameConfig.startPy,a.getComponent("blank").init(this.blankCo,e,t),n.addChild(a),this._blankArr[e][t]=a}this.checkSame()},checkSame:function(n,e){for(var t=[],a=[],o=0;o<GameConfig.blank_w;o++)for(var i=0;i<GameConfig.blank_h;i++)i<GameConfig.blank_h-2&&this._blankArr[o][i].getComponent("blank").showInfo().type==this._blankArr[o][i+1].getComponent("blank").showInfo().type&&this._blankArr[o][i+1].getComponent("blank").showInfo().type==this._blankArr[o][i+2].getComponent("blank").showInfo().type&&t.push(this._blankArr[o][i],this._blankArr[o][i+1],this._blankArr[o][i+2]),o<GameConfig.blank_w-2&&this._blankArr[o][i].getComponent("blank").showInfo().type==this._blankArr[o+1][i].getComponent("blank").showInfo().type&&this._blankArr[o+1][i].getComponent("blank").showInfo().type==this._blankArr[o+2][i].getComponent("blank").showInfo().type&&a.push(this._blankArr[o][i],this._blankArr[o+1][i],this._blankArr[o+2][i]);this.filterDelSame(t,a),this._count++,cc.log("this._count",this._count),0==t.length&&0==a.length&&1==this._count&&this.scheduleOnce(function(){this.exchangeLocation(n,e,!1)},.55)},exchangeCloseClick:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++){var t=this._blankArr[n][e];t.getComponent("blank").clickClose(!0)}},exchangeOpenClick:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++){var t=this._blankArr[n][e];t.getComponent("blank").clickClose(!1)}},exchange:function(){cc.director.loadScene("start")},replay:function(){cc.director.loadScene("New Scene")},time:function(){this.schedule(function(){if(0==this.countNum&&this._score<100){var n=cc.find("Canvas/IMG_22");n.active=!0,this.kaiguan(!0),this.node.getChildByName("time label").active=!1,this.node.getChildByName("label").active=!1,this.node.getChildByName("score label").active=!1;var e=cc.find("Canvas/IMG_22/false");e.active=!0,this.scheduleOnce(function(){this.replay()},4)}this.countNum--,this.node.getChildByName("time label").getComponent(cc.Label).string="time:"+this.countNum},1)},find:function(){this._search=!0;for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++)this._search&&this.helpCheck(this._blankArr[n][e])},helpCheck:function(n){for(var e=n.getComponent("blank").showInfo(),t=e.type,a=cc.p(e.i,e.j),o=[cc.p(0,1),cc.p(0,-1),cc.p(1,0),cc.p(-1,0)],i=0;i<o.length;i++){var l=cc.pAdd(a,o[i]);if(this._blankArr[l.x]&&this._blankArr[l.x][l.y]){var r=this._blankArr[l.x][l.y].getComponent("blank").showInfo().type;if(cc.log("aroundColor",r),n.getComponent("blank").changeColor(r),this._blankArr[l.x][l.y].getComponent("blank").changeColor(t),this.checkCheck(),n.getComponent("blank").changeColor(t),this._blankArr[l.x][l.y].getComponent("blank").changeColor(r),0==this._search)return this._blankArr[l.x][l.y].scale=.8,n.scale=.8,void this.scheduleOnce(function(){this._blankArr[l.x][l.y].scale=1,n.scale=1},.33)}}},checkCheck:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++){if(e<GameConfig.blank_h-2&&this._blankArr[n][e].getComponent("blank").showInfo().type==this._blankArr[n][e+1].getComponent("blank").showInfo().type&&this._blankArr[n][e+1].getComponent("blank").showInfo().type==this._blankArr[n][e+2].getComponent("blank").showInfo().type){this._search=!1;break}if(n<GameConfig.blank_w-2&&this._blankArr[n][e].getComponent("blank").showInfo().type==this._blankArr[n+1][e].getComponent("blank").showInfo().type&&this._blankArr[n+1][e].getComponent("blank").showInfo().type==this._blankArr[n+2][e].getComponent("blank").showInfo().type){this._search=!1;break}}},kaiguan:function(n){if(n){var e=cc.find("Canvas/bangzhu");e.active=!0}else{var e=cc.find("Canvas/bangzhu");e.active=!1}}}),cc._RFpop()},{}]},{},["NewScript","blank","game"]);